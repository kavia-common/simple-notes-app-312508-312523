{"is_source_file": true, "format": "Python", "description": "This is a FastAPI backend source file implementing a REST API for a simple notes application using SQLite as a datastore. It includes route handlers for CRUD operations on notes, database schema initialization, and auxiliary functions for database connection management and timestamp generation.", "external_files": ["sqlite3", "os", "contextlib", "datetime", "fastapi", "pydantic"], "external_methods": ["os.getenv", "os.makedirs", "sqlite3.connect", "timezone.utc", "datetime.now", "FastAPI", "HTTPException", "Response", "status.HTTP_404_NOT_FOUND", "status.HTTP_500_INTERNAL_SERVER_ERROR", "status.HTTP_201_CREATED"], "published": ["health_check", "list_notes", "create_note", "get_note", "update_note", "delete_note"], "classes": [{"name": "Note", "description": "A persisted note returned to clients, modeled with Pydantic for validation and serialization."}, {"name": "NoteCreate", "description": "Pydantic model for input data when creating a new note, with validation to ensure the title is non-empty."}, {"name": "NoteUpdate", "description": "Pydantic model for input data to update an existing note, including validation for the title."}], "methods": [{"name": "str _utc_now_iso()", "description": "Returns the current UTC timestamp in ISO8601 format as a string.", "scope": "", "scopeKind": ""}, {"name": "str get_db_path()", "description": "Resolves and returns the database file path, with fallback defaults.", "scope": "", "scopeKind": ""}, {"name": "sqlite3.Connection _db_conn()", "description": "Provides a SQLite connection context with row factory set.", "scope": "", "scopeKind": ""}, {"name": "None _ensure_schema()", "description": "Creates the notes table if it does not exist.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,Any] _row_to_note(row: sqlite3.Row)", "description": "Converts a SQLite row into a dictionary representing a Note.", "scope": "", "scopeKind": ""}, {"name": "None _on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _title_non_empty(cls, v: str)", "scope": "NoteUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str,Any] create_note(payload: NoteCreate)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Response delete_note( id: int = Field(..., ge=1, description=\"Note id (positive integer).\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] get_note(id: int = Field(..., ge=1, description=\"Note id (positive integer).\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,str] health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Dict[str,Any]] list_notes()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] update_note( payload: NoteUpdate, id: int = Field(..., ge=1, description=\"Note id (positive integer).\"), )", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_db_path", "_ensure_schema", "_utc_now_iso", "_row_to_note", "os.getenv", "os.makedirs", "sqlite3.connect", "conn.execute", "conn.commit", "conn.close", "datetime.now", "FastAPI", "HTTPException", "Response"], "search-terms": ["FastAPI notes API", "SQLite CRUD", "notes backend", "database schema initialization", "pydantic models for notes", "get_db_path function", "notes route handlers", "notes API endpoints"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "54df17193d4e91d212681f8dd548c8f4cbc4e2bd", "revision_history": [{"9": "54df17193d4e91d212681f8dd548c8f4cbc4e2bd"}, {"10": "54df17193d4e91d212681f8dd548c8f4cbc4e2bd"}], "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^class Note(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_db_conn", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def _db_conn() -> sqlite3.Connection:$/", "language": "Python", "typeref": "typename:sqlite3.Connection", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_ensure_schema", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def _ensure_schema() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_on_startup", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def _on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_row_to_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def _row_to_note(row: sqlite3.Row) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "_title_non_empty", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    def _title_non_empty(cls, v: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(cls, v: str)", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "_title_non_empty", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    def _title_non_empty(cls, v: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(cls, v: str)", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "_utc_now_iso", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def _utc_now_iso() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field($/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field($/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Body content of the note.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def create_note(payload: NoteCreate) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(payload: NoteCreate)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    created_at: str = Field(..., description=\"UTC ISO8601 timestamp when the note was created.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def delete_note($/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "( id: int = Field(..., ge=1, description=\"Note id (positive integer).\"), )"}, {"_type": "tag", "name": "get_db_path", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def get_db_path() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def get_note(id: int = Field(..., ge=1, description=\"Note id (positive integer).\")) -> Dict[str,/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(id: int = Field(..., ge=1, description=\"Note id (positive integer).\"))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def health_check() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier of the note.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def list_notes() -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "model_config", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    model_config = ConfigDict(from_attributes=True)$/", "language": "Python", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Short title of the note.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=200, description=\"Non-empty title (max 200 /", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=200, description=\"Non-empty title (max 200 /", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^def update_note($/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "( payload: NoteUpdate, id: int = Field(..., ge=1, description=\"Note id (positive integer).\"), )"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-app-312508-312523/notes_backend/src/api/main.py", "pattern": "/^    updated_at: str = Field(..., description=\"UTC ISO8601 timestamp when the note was last updat/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}], "hash": "1ef51806ad232c6464e63d306b58b4e2", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str content", "scope": "NoteCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "model_config = ConfigDict(from_attributes=True)", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str title", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "str updated_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}]}